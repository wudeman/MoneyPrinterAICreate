import{d as M,a as _,r as C,k as V,c as i,b as e,e as h,F as x,g as I,t as r,w as u,v as m,h as c,f as D,j as S,o as p}from"./index-DaM9jTgS.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"model-management-container"},A={class:"action-bar"},B=["disabled"],F={class:"models-list"},$={key:0},L=["onClick"],N=["onClick"],j={key:1},q={key:2},z={class:"form-group"},E={class:"form-row"},G={class:"form-group"},K={class:"form-group"},P={class:"form-group"},Q={class:"form-group"},R={class:"form-row"},T={class:"form-group"},H={class:"form-group"},J={class:"form-actions"},W=["disabled"],X=M({__name:"ModelManagementView",setup(Y){const s=_([]),n=_(!1),d=_(null),v=_(!1),o=C({model_name:"",model_type:"",provider:"",api_key:"",base_url:"",account_id:"",secret_key:""}),b=async()=>{n.value=!0;try{s.value=[{id:1,model_name:"gpt-3.5-turbo",model_type:"chat",provider:"openai",api_key:"sk-...",base_url:"",created_at:"2024-01-01 10:00:00",updated_at:"2024-01-01 10:00:00"},{id:2,model_name:"qwen:7b",model_type:"chat",provider:"ollama",api_key:"123",base_url:"http://localhost:11434/v1",created_at:"2024-01-02 14:30:00",updated_at:"2024-01-02 14:30:00"}]}catch(a){console.error("获取模型列表失败:",a),alert("获取模型列表失败，请重试")}finally{n.value=!1}},y=()=>{d.value=null,o.model_name="",o.model_type="",o.provider="",o.api_key="",o.base_url="",o.account_id="",o.secret_key="",v.value=!0},f=a=>{d.value=a,Object.assign(o,a),v.value=!0},k=async()=>{if(!o.model_name||!o.provider||!o.api_key){alert("请填写必填字段");return}n.value=!0;try{if(d.value){const a=s.value.findIndex(t=>{var l;return t.id===((l=d.value)==null?void 0:l.id)});a!==-1&&(s.value[a]={...o,id:d.value.id}),alert("模型更新成功")}else{const a={...o,id:Date.now(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};s.value.push(a),alert("模型创建成功")}v.value=!1}catch(a){console.error("保存模型失败:",a),alert("保存模型失败，请重试")}finally{n.value=!1}},g=async a=>{if(confirm("确定要删除这个模型吗？")){n.value=!0;try{s.value=s.value.filter(t=>t.id!==a),alert("模型删除成功")}catch(t){console.error("删除模型失败:",t),alert("删除模型失败，请重试")}finally{n.value=!1}}};return V(()=>{b()}),(a,t)=>(p(),i("div",O,[t[20]||(t[20]=e("h2",null,"模型管理",-1)),e("div",A,[e("button",{onClick:y,class:"add-btn"},"添加模型"),e("button",{onClick:b,class:"refresh-btn",disabled:n.value},"刷新列表",8,B)]),e("div",F,[s.value.length>0?(p(),i("table",$,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"模型名称"),e("th",null,"模型类型"),e("th",null,"提供商"),e("th",null,"创建时间"),e("th",null,"操作")])],-1)),e("tbody",null,[(p(!0),i(x,null,I(s.value,l=>(p(),i("tr",{key:l.id},[e("td",null,r(l.id),1),e("td",null,r(l.model_name),1),e("td",null,r(l.model_type),1),e("td",null,r(l.provider),1),e("td",null,r(l.created_at),1),e("td",null,[e("button",{onClick:w=>f(l),class:"edit-btn"},"编辑",8,L),e("button",{onClick:w=>g(l.id),class:"delete-btn"},"删除",8,N)])]))),128))])])):n.value?(p(),i("p",q,"加载中...")):(p(),i("p",j,"暂无模型，请添加模型"))]),v.value?(p(),i("div",{key:0,class:"modal-overlay",onClick:t[9]||(t[9]=l=>v.value=!1)},[e("div",{class:"modal-content",onClick:t[8]||(t[8]=S(()=>{},["stop"]))},[e("h3",null,r(d.value?"编辑模型":"添加模型"),1),e("div",z,[t[11]||(t[11]=e("label",null,"模型名称 *",-1)),u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>o.model_name=l),type:"text",placeholder:"如：gpt-3.5-turbo"},null,512),[[m,o.model_name]])]),e("div",E,[e("div",G,[t[13]||(t[13]=e("label",null,"模型类型",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>o.model_type=l)},[...t[12]||(t[12]=[e("option",{value:"chat"},"Chat",-1),e("option",{value:"completion"},"Completion",-1),e("option",{value:"embedding"},"Embedding",-1)])],512),[[c,o.model_type]])]),e("div",K,[t[15]||(t[15]=e("label",null,"提供商 *",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>o.provider=l)},[...t[14]||(t[14]=[D('<option value="openai" data-v-e8be209a>OpenAI</option><option value="ollama" data-v-e8be209a>Ollama</option><option value="moonshot" data-v-e8be209a>Moonshot</option><option value="azure" data-v-e8be209a>Azure</option><option value="qwen" data-v-e8be209a>Qwen</option><option value="gemini" data-v-e8be209a>Gemini</option><option value="g4f" data-v-e8be209a>G4F</option><option value="oneapi" data-v-e8be209a>OneAPI</option>',8)])],512),[[c,o.provider]])])]),e("div",P,[t[16]||(t[16]=e("label",null,"API Key *",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.api_key=l),type:"password"},null,512),[[m,o.api_key]])]),e("div",Q,[t[17]||(t[17]=e("label",null,"Base URL",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>o.base_url=l),type:"text",placeholder:"如：https://api.openai.com/v1"},null,512),[[m,o.base_url]])]),e("div",R,[e("div",T,[t[18]||(t[18]=e("label",null,"Account ID",-1)),u(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>o.account_id=l),type:"text"},null,512),[[m,o.account_id]])]),e("div",H,[t[19]||(t[19]=e("label",null,"Secret Key",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o.secret_key=l),type:"password"},null,512),[[m,o.secret_key]])])]),e("div",J,[e("button",{onClick:k,disabled:n.value},r(d.value?"更新":"创建"),9,W),e("button",{onClick:t[7]||(t[7]=l=>v.value=!1)},"取消")])])])):h("",!0)]))}}),te=U(X,[["__scopeId","data-v-e8be209a"]]);export{te as default};
